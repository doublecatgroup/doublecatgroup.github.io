webpackJsonp([1],{"7vDR":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),t("router-view")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"/"}},[t("img",{attrs:{src:"/static/logo.png",height:"200",width:"200"}})])}]};var a=n("VU/8")({name:"App"},r,!1,function(e){n("7vDR")},null,null).exports,o=n("/ocq"),u=n("mw3O"),s=n.n(u),l=n("Gu7T"),c=n.n(l),m=n("ivXw");function p(e){var t=Array.isArray(e.path)?e.path:[e.path];return m.assoc("path",t,e)}function d(e){return m.path(e,this.$route.query)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.call(this,m.assocPath(e,t),n)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.call(this,m.dissocPath(e),t)}function h(e,t){var n=e(this.$route.query);(t?this.$router.replace:this.$router.push).call(this.$router,{query:n})}var g={beforeCreate:function(){var e=this,t={qget:d,qset:v,qdel:f};this.$options.methods=m.merge(this.$options.methods||{},t);var n=this.$options.qdata;if(n){var i={},r=function(e){return m.map(p,e)}(n.call(this.$options.propsData)),a=function(t){var n=r[t],a=function(){return d.call(e,n.path)},o=m.curry(v)(n.path);i[t]={get:a,set:o},void 0===a()&&o.call(e,n.def,!0)};for(var o in r)a(o);this.$options.computed=m.merge(this.$options.computed||{},i)}}},_={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],class:e.original&&e.input!=e.original?"modified":"",domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}})},staticRenderFns:[]};var y=n("VU/8")({props:["value","original"],computed:{input:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},_,!1,function(e){n("RXa9")},null,null).exports,b=n("ivXw"),w=n("0XFg").sprintf;function x(e,t){return{key:e,name:t.name,price:t.price,designs:b.mapObjIndexed(function(e,n,i){var r=b.merge({key:n},e);return{name:w(t.designNameTemplate,r),value:{design:n,no:w(t.designNoTemplate,r),color:e.color}}},t.designs)}}var N=b.mapObjIndexed(function(e,t,n){return x(t,e)},{custom:{name:"-",designNameTemplate:"-",designNoTemplate:"",designs:{custom:{price:26}}},bolove:{name:"BoLove",price:26,designNameTemplate:"P%(key)s",designNoTemplate:"TH305-%(key)02d",designs:{18:{color:"blue"},19:{color:"grey"},21:{color:"red"},22:{color:"purple"}}},chenille:{name:"Chenille",price:30,designNameTemplate:"%(key)s",designNoTemplate:"018-%(key)s",designs:{12:{color:"brown"},19:{color:"red"},23:{color:"green"}}}}),k={mkFabric:x,components:{ShowModificationsInput:y},props:["value"],data:function(){return{fabrics:N}},computed:{fabricKey:{get:function(){return this.value.key},set:function(e){var t=this.fabrics[e],n=b.keys(t.designs)[0],i=t.designs[n];this.$emit("input",b.merge(i.value,{key:e,price:t.price}))}},designKey:{get:function(){return this.value.design},set:function(e){var t=this.designs[e];this.$emit("input",b.merge(this.value,t.value))}},color:{get:function(){return this.value.color},set:function(e){this.$emit("input",b.assoc("color",e,this.value))}},no:{get:function(){return this.value.no},set:function(e){this.$emit("input",b.assoc("no",e,this.value))}},price:{get:function(){return this.value.price},set:function(e){this.$emit("input",b.assoc("price",e,this.value))}},fabric:function(){return this.fabrics[this.value.key]},designs:function(){return this.fabric.designs},design:function(){return this.designs[this.value.design]}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.fabricKey,expression:"fabricKey"}],staticClass:"fabric",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.fabricKey=t.target.multiple?n:n[0]}}},e._l(e.fabrics,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name))])})),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.designKey,expression:"designKey"}],staticClass:"design",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.designKey=t.target.multiple?n:n[0]}}},e._l(e.designs,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name))])})),e._v(" "),"custom"!==e.designKey?n("img",{staticClass:"design",attrs:{src:"/static/"+e.value.key+"/"+e.value.design+".png",height:"64",width:"64"}}):e._e(),e._v(" "),n("show-modifications-input",{staticClass:"color",attrs:{placeholder:"color",original:e.design.value.color},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}}),e._v(" "),n("show-modifications-input",{staticClass:"no",attrs:{placeholder:"no",original:e.design.value.no},model:{value:e.no,callback:function(t){e.no=t},expression:"no"}}),e._v(" "),n("label",[e._v("price: "),n("show-modifications-input",{staticClass:"price",attrs:{placeholder:"price",type:"number",step:"any",original:e.fabric.price},model:{value:e.price,callback:function(t){e.price=e._n(t)},expression:"price"}})],1)],1)},staticRenderFns:[]};var P=n("VU/8")(k,$,!1,function(e){n("Rgrf")},null,null).exports,U=n("ivXw"),F={name:null,width:240,drop:230,fabric:{key:"custom",design:"custom",price:26},heading:"deepPleat",ratio:2},T={deepPleat:{cn:"四脚勾",en:"Deep Pleat"},doublePleat:{cn:"韩折",en:"Double Pleat"},eylet:{cn:"打孔",en:"Eyelet"},tabTop:{cn:"吊带",en:"Tab Top"},rodPocket:{cn:"穿杆",en:"Rod Pocket"}},I=[{name:"window",value:function(){return this.name}},{name:"fabric",value:function(){return this.fabric.key}},{name:"design",value:function(){return this.fabric.no}},{name:"color",value:function(){return this.fabric.color}},{name:"width",value:function(){return this.width/100}},{name:"height",value:function(){return this.drop/100}},{name:"ratio",value:function(){return this.ratio}},{name:"heading",value:function(){var e=this.headings[this.heading];return e.cn+" ("+e.en+")"}},{name:"material usage",value:function(){return this.materialUsage}}],R={components:{Fabric:P},exportedData:I,props:["path","unit","exportView"],mixins:[g],data:function(){return{headings:T}},qdata:function(){var e=this;return U.mapObjIndexed(function(t,n,i){return{path:U.append(n,e.path),def:t}},F)},methods:{idFor:function(e){return U.prepend(e,this.path).join("-")}},computed:{total:function(){return this.materialUsage*this.fabric.price},widthByUnit:{get:function(){return this.width/this.unit.multiplier},set:function(e){this.width=e*this.unit.multiplier}},materialUsage:function(){return this.width*this.ratio/100},exportedData:function(){var e=this;return U.map(function(t){return{name:t.name,value:t.value.call(e)}},I)}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.exportView?n("tr",e._l(e.exportedData,function(t){return n("td",{key:t.name},[e._v(e._s(t.value))])})):n("li",{staticClass:"item",attrs:{id:e.path.join("-")}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],attrs:{autocapitalize:"none"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",[e._v("width: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.widthByUnit,expression:"widthByUnit",modifiers:{number:!0}}],attrs:{id:e.idFor("width"),type:"number",step:"any"},domProps:{value:e.widthByUnit},on:{input:function(t){t.target.composing||(e.widthByUnit=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("label",[e._v("drop:  "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.drop,expression:"drop",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.drop},on:{input:function(t){t.target.composing||(e.drop=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("label",[e._v("ratio: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.ratio,expression:"ratio",modifiers:{number:!0}}],attrs:{type:"number",step:"0.1"},domProps:{value:e.ratio},on:{input:function(t){t.target.composing||(e.ratio=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("fabric",{model:{value:e.fabric,callback:function(t){e.fabric=t},expression:"fabric"}}),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.heading,expression:"heading"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.heading=t.target.multiple?n:n[0]}}},e._l(e.headings,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(" "+e._s(t.en))])})),e._v(" "),n("label",[e._v("total: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.total,expression:"total",modifiers:{number:!0}}],attrs:{id:e.idFor("total"),type:"number",step:"any",readonly:""},domProps:{value:e.total},on:{input:function(t){t.target.composing||(e.total=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("button",{attrs:{id:e.idFor("remove")},on:{click:function(t){e.$emit("remove")}}},[e._v("Remove")])],1)},staticRenderFns:[]};var q=n("VU/8")(R,V,!1,function(e){n("VliL")},null,null).exports,A=n("ivXw"),D={components:{window:q},mixins:[g],data:function(){return{newItemName:"",units:{m:100,cm:1,inch:2.54},unitName:"cm",debug:!1,exportedData:I}},computed:{items:function(){return A.keys(this.qget(["item"])||{})},unit:function(){return{name:this.unitName,multiplier:this.units[this.unitName]}}},methods:{newItem:function(){var e=Math.max.apply(Math,[0].concat(c()(this.items)))+1;this.qset(["item",e,"name"],this.newItemName),this.newItemName=""}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ol",e._l(e.items,function(t){return n("window",{key:t,attrs:{path:["item",t],unit:e.unit,exportView:!1},on:{remove:function(n){e.qdel(["item",t])}}})})),e._v(" "),n("form",{staticClass:"controls",on:{submit:function(t){return t.preventDefault(),e.newItem(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newItemName,expression:"newItemName",modifiers:{trim:!0}}],attrs:{id:"new-item-name",autocapitalize:"none"},domProps:{value:e.newItemName},on:{input:function(t){t.target.composing||(e.newItemName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("button",{attrs:{id:"new-item"}},[e._v("Add")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.unitName,expression:"unitName"}],attrs:{id:"select-unit"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.unitName=t.target.multiple?n:n[0]}}},e._l(e.units,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(i))])})),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.debug,expression:"debug"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.debug=t.target.multiple?n:n[0]}}},[n("option",{key:!1,domProps:{value:!1}},[e._v("normal")]),e._v(" "),n("option",{key:!0,domProps:{value:!0}},[e._v("debug")])])]),e._v(" "),n("div",{style:e.debug?"":"display: none"},[n("table",[n("tr",e._l(e.exportedData,function(t){return n("th",{key:t.name},[e._v(e._s(t.name))])})),e._v(" "),e._l(e.items,function(t){return n("window",{key:t,attrs:{path:["item",t],unit:e.unit,exportView:!0}})})],2)])])},staticRenderFns:[]};var K=n("VU/8")(D,C,!1,function(e){n("jFPV")},null,null).exports;i.a.use(o.a);var j=new o.a({parseQuery:function(e){return s.a.parse(e,{parseArrays:!1})},stringifyQuery:function(e){return s.a.stringify(e,{addQueryPrefix:!0})},mode:"history",routes:[{path:"*",name:"OrderForm",component:K}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:j,components:{App:a},template:"<App/>"})},RXa9:function(e,t){},Rgrf:function(e,t){},VliL:function(e,t){},jFPV:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d307e0cc3b1bb89aebb9.js.map