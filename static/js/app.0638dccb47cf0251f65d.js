webpackJsonp([1],{"6oaK":function(e,t){},"76zF":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),t("router-view")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"/"}},[t("img",{attrs:{src:"/static/logo.png"}})])}]};var a=n("VU/8")({name:"App"},r,!1,function(e){n("6oaK")},null,null).exports,o=n("/ocq"),u=n("mw3O"),s=n.n(u),l=n("Gu7T"),c=n.n(l),m=n("ivXw");function d(e){var t=Array.isArray(e.path)?e.path:[e.path];return m.assoc("path",t,e)}function p(e){return m.path(e,this.$route.query)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.call(this,m.assocPath(e,t),n)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.call(this,m.dissocPath(e),t)}function h(e,t){var n=e(this.$route.query);(t?this.$router.replace:this.$router.push).call(this.$router,{query:n})}var g={beforeCreate:function(){var e=this,t={qget:p,qset:v,qdel:f};this.$options.methods=m.merge(this.$options.methods||{},t);var n=this.$options.qdata;if(n){var i={},r=function(e){return m.map(d,e)}(n.call(this.$options.propsData)),a=function(t){var n=r[t],a=function(){return p.call(e,n.path)},o=m.curry(v)(n.path);i[t]={get:a,set:o},void 0===a()&&o.call(e,n.def,!0)};for(var o in r)a(o);this.$options.computed=m.merge(this.$options.computed||{},i)}}},y=n("ivXw"),b=n("0XFg").sprintf,_={name:null,width:240,drop:230,fabricKey:"bolove",designKey:"18",heading:"deepPleat",ratio:2,price:26},w={deepPleat:{cn:"四脚勾",en:"Deep Pleat"},doublePleat:{cn:"韩折",en:"Double Pleat"},eylet:{cn:"打孔",en:"Eyelet"},tabTop:{cn:"吊带",en:"Tab Top"},rodPocket:{cn:"穿杆",en:"Rod Pocket"}};function N(e,t){return{key:e,name:t.name,price:t.price,designs:y.mapObjIndexed(function(e,n,i){return function(e,t,n,i){return{no:b(e,n),name:b(t,n),color:i.color}}(t.designNo,t.designName,n,e)},t.designs)}}var x=y.mapObjIndexed(function(e,t,n){return N(t,e)},{bolove:{name:"BoLove",price:26,designName:"P%s",designNo:"TH305-%s",designs:{18:{color:"blue"},19:{color:"grey"},21:{color:"red"},22:{color:"purple"}}},chenille:{name:"Chenille",price:30,designName:"%s",designNo:"018-%s",designs:{12:{color:"brown"},19:{color:"red"},23:{color:"green"}}}}),P=[{name:"window",value:function(){return this.name}},{name:"fabric",value:function(){return this.fabric.key}},{name:"design",value:function(){return this.design.no}},{name:"color",value:function(){return this.design.color}},{name:"width",value:function(){return this.width/100}},{name:"height",value:function(){return this.drop/100}},{name:"ratio",value:function(){return this.ratio}},{name:"heading",value:function(){var e=this.headings[this.heading];return e.cn+" ("+e.en+")"}},{name:"material usage",value:function(){return this.materialUsage}}],$={mkFabric:N,exportedData:P,props:["path","unit","exportView"],mixins:[g],data:function(){return{headings:w,fabrics:x}},qdata:function(){var e=this;return y.mapObjIndexed(function(t,n,i){return{path:y.append(n,e.path),def:t}},_)},methods:{idFor:function(e){return y.prepend(e,this.path).join("-")}},computed:{fabricKeyModel:{get:function(){return this.fabricKey},set:function(e){this.fabricKey=e,this.designKey=y.keys(this.fabric.designs)[0],this.price=this.fabric.price}},fabric:function(){return this.fabrics[this.fabricKey]},design:function(){return this.fabric.designs[this.designKey]},total:function(){return this.materialUsage*this.price},widthByUnit:{get:function(){return this.width/this.unit.multiplier},set:function(e){this.width=e*this.unit.multiplier}},materialUsage:function(){return this.width*this.ratio/100},exportedData:function(){var e=this;return y.map(function(t){return{name:t.name,value:t.value.call(e)}},P)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.exportView?n("tr",e._l(e.exportedData,function(t){return n("td",{key:t.name},[e._v(e._s(t.value))])})):n("li",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.name,expression:"name",modifiers:{trim:!0}}],attrs:{autocapitalize:"none"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("label",[e._v("width: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.widthByUnit,expression:"widthByUnit",modifiers:{number:!0}}],attrs:{id:e.idFor("width"),type:"number",step:"any"},domProps:{value:e.widthByUnit},on:{input:function(t){t.target.composing||(e.widthByUnit=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("label",[e._v("drop:  "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.drop,expression:"drop",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.drop},on:{input:function(t){t.target.composing||(e.drop=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("label",[e._v("ratio: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.ratio,expression:"ratio",modifiers:{number:!0}}],attrs:{type:"number",step:"0.1"},domProps:{value:e.ratio},on:{input:function(t){t.target.composing||(e.ratio=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.fabricKeyModel,expression:"fabricKeyModel"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.fabricKeyModel=t.target.multiple?n:n[0]}}},e._l(e.fabrics,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name))])})),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.designKey,expression:"designKey"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.designKey=t.target.multiple?n:n[0]}}},e._l(e.fabric.designs,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name+" ("+t.color+")"))])})),e._v(" "),n("img",{staticClass:"fabric",attrs:{src:"/static/"+e.fabricKey+"/"+e.designKey+".png",alt:e.design.name,height:"64",width:"64"}}),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.heading,expression:"heading"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.heading=t.target.multiple?n:n[0]}}},e._l(e.headings,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(" "+e._s(t.en))])})),e._v(" "),n("label",[e._v("price: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"price",modifiers:{number:!0}}],class:e.price==e.fabric.price?"":"modified",attrs:{type:"number",step:"any"},domProps:{value:e.price},on:{input:function(t){t.target.composing||(e.price=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("label",[e._v("total: "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.total,expression:"total",modifiers:{number:!0}}],attrs:{id:e.idFor("total"),type:"number",step:"any",readonly:""},domProps:{value:e.total},on:{input:function(t){t.target.composing||(e.total=e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),n("button",{attrs:{id:e.idFor("remove")},on:{click:function(t){e.$emit("remove")}}},[e._v("Remove")])])},staticRenderFns:[]};var K=n("VU/8")($,k,!1,function(e){n("76zF")},null,null).exports,U=n("ivXw"),F={components:{window:K},mixins:[g],data:function(){return{newItemName:"",units:{m:100,cm:1,inch:2.54},unitName:"cm",debug:!1,exportedData:P}},computed:{items:function(){return U.keys(this.qget(["item"])||{})},unit:function(){return{name:this.unitName,multiplier:this.units[this.unitName]}}},methods:{newItem:function(){var e=Math.max.apply(Math,[0].concat(c()(this.items)))+1;this.qset(["item",e,"name"],this.newItemName),this.newItemName=""}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ol",e._l(e.items,function(t){return n("window",{key:t,attrs:{path:["item",t],unit:e.unit,exportView:!1},on:{remove:function(n){e.qdel(["item",t])}}})})),e._v(" "),n("form",{staticClass:"controls",on:{submit:function(t){return t.preventDefault(),e.newItem(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newItemName,expression:"newItemName",modifiers:{trim:!0}}],attrs:{id:"new-item-name",autocapitalize:"none"},domProps:{value:e.newItemName},on:{input:function(t){t.target.composing||(e.newItemName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("button",{attrs:{id:"new-item"}},[e._v("Add")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.unitName,expression:"unitName"}],attrs:{id:"select-unit"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.unitName=t.target.multiple?n:n[0]}}},e._l(e.units,function(t,i){return n("option",{key:i,domProps:{value:i}},[e._v(e._s(i))])})),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.debug,expression:"debug"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.debug=t.target.multiple?n:n[0]}}},[n("option",{key:!1,domProps:{value:!1}},[e._v("normal")]),e._v(" "),n("option",{key:!0,domProps:{value:!0}},[e._v("debug")])])]),e._v(" "),n("div",{style:e.debug?"":"display: none"},[n("table",[n("tr",e._l(e.exportedData,function(t){return n("th",{key:t.name},[e._v(e._s(t.name))])})),e._v(" "),e._l(e.items,function(t){return n("window",{key:t,attrs:{path:["item",t],unit:e.unit,exportView:!0}})})],2)])])},staticRenderFns:[]};var A=n("VU/8")(F,q,!1,function(e){n("QF3a")},null,null).exports;i.a.use(o.a);var I=new o.a({parseQuery:function(e){return s.a.parse(e,{parseArrays:!1})},stringifyQuery:function(e){return s.a.stringify(e,{addQueryPrefix:!0})},mode:"history",routes:[{path:"*",name:"OrderForm",component:A}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:I,components:{App:a},template:"<App/>"})},QF3a:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0638dccb47cf0251f65d.js.map